import cv2
import numpy as np
import matplotlib.pyplot as plt
import time

#################################INITIALIZATIONS######################################################
blueShadow_static=[0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.87814589e-05, 0.00000000e+00, 3.75629179e-05, 0.00000000e+00, 5.63443768e-05, 1.87814589e-05, 1.87814589e-05, 1.87814589e-05, 3.75629179e-05, 1.87814589e-05, 0.00000000e+00, 5.63443768e-05, 3.75629179e-05, 5.63443768e-05, 3.75629179e-05, 5.63443768e-05, 7.51258358e-05, 1.31470213e-04, 5.63443768e-05, 3.75629179e-05, 1.87814589e-05, 1.69033130e-04, 9.39072947e-05, 1.31470213e-04, 1.12688754e-04, 1.69033130e-04, 2.06596048e-04, 7.51258358e-05, 1.31470213e-04, 1.12688754e-04, 9.39072947e-05, 7.51258358e-05, 9.39072947e-05, 1.50251672e-04, 1.12688754e-04, 7.51258358e-05, 1.12688754e-04, 2.06596048e-04, 7.51258358e-05, 5.63443768e-05, 1.31470213e-04, 1.31470213e-04, 2.62940425e-04, 1.12688754e-04, 7.51258358e-05, 1.50251672e-04, 1.31470213e-04, 1.87814589e-04, 9.39072947e-05, 9.39072947e-05, 5.63443768e-05, 9.39072947e-05, 5.63443768e-05, 1.87814589e-05, 9.39072947e-05, 9.39072947e-05, 9.39072947e-05, 5.63443768e-05, 5.63443768e-05, 7.51258358e-05, 5.63443768e-05, 5.63443768e-05, 1.12688754e-04, 1.87814589e-04, 9.39072947e-05, 9.39072947e-05, 3.75629179e-05, 1.31470213e-04, 5.63443768e-05, 3.75629179e-05, 5.63443768e-05, 5.63443768e-05, 1.87814589e-05, 3.75629179e-05, 1.87814589e-05, 5.63443768e-05, 0.00000000e+00, 3.75629179e-05, 2.25377507e-04, 9.39072947e-05, 9.39072947e-05, 1.87814589e-05, 5.63443768e-05, 2.25377507e-04, 1.50251672e-04, 7.51258358e-05, 3.75629179e-05, 3.00503343e-04, 1.69033130e-04, 3.75629179e-05, 1.31470213e-04, 1.50251672e-04, 7.51258358e-05, 3.75629179e-05, 5.63443768e-05, 5.63443768e-05, 5.63443768e-05, 1.12688754e-04, 3.19284802e-04, 2.81721884e-04, 1.69033130e-04, 2.91657287e-04, 3.24274918e-03, 5.07144219e-03, 9.12813841e-03, 1.47930239e-02, 1.49769269e-02, 1.76297147e-02, 1.68944963e-02, 1.87849930e-02, 1.91295077e-02, 2.68923490e-02, 3.19649150e-02, 3.96338875e-02, 3.29647127e-02, 3.03698529e-02, 2.82396564e-02, 2.84971413e-02, 1.99613961e-02, 2.08202862e-02, 1.65958376e-02, 1.41599379e-02, 1.32966849e-02, 1.25697993e-02, 1.18354126e-02, 9.23941902e-03, 8.57758916e-03, 9.44287052e-03, 8.47693444e-03, 1.05152679e-02, 9.78407982e-03, 7.94416346e-03, 9.93113691e-03, 9.39771720e-03, 9.41547734e-03, 9.80971071e-03, 1.04960008e-02, 1.07680015e-02, 1.41137149e-02, 1.38497820e-02, 1.46198347e-02, 1.37980713e-02, 1.42780333e-02, 1.62356271e-02, 1.52869608e-02, 1.57757726e-02, 1.53830379e-02, 1.86419895e-02, 1.69246810e-02, 1.63776996e-02, 1.35864248e-02, 1.33817706e-02, 1.34196223e-02, 1.28120415e-02, 1.38641453e-02, 1.34524439e-02, 9.78722668e-03, 9.44196376e-03, 7.75420475e-03, 7.70666228e-03, 1.00428349e-02, 1.16390991e-02, 1.12365721e-02, 1.02989553e-02, 1.80290752e-02, 1.33958202e-02, 1.72473051e-02, 1.43594053e-02, 7.47998836e-03, 2.04717902e-03, 2.70453009e-03, 1.50251672e-04, 1.50251672e-04, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]
greenShadow_static=[0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.87814589e-05, 3.75629179e-05, 0.00000000e+00, 1.87814589e-05, 1.87814589e-05, 0.00000000e+00, 3.75629179e-05, 1.87814589e-05, 1.87814589e-05, 1.87814589e-05, 0.00000000e+00, 1.87814589e-05, 1.87814589e-05, 0.00000000e+00, 1.12688754e-04, 5.63443768e-05, 3.75629179e-05, 3.75629179e-05, 5.63443768e-05, 3.75629179e-05, 1.12688754e-04, 1.31470213e-04, 7.51258358e-05, 1.87814589e-05, 7.51258358e-05, 1.12688754e-04, 1.31470213e-04, 3.75629179e-05, 1.87814589e-04, 2.62940425e-04, 1.12688754e-04, 7.51258358e-05, 1.69033130e-04, 1.50251672e-04, 9.39072947e-05, 1.31470213e-04, 1.69033130e-04, 9.39072947e-05, 5.63443768e-05, 1.12688754e-04, 3.00503343e-04, 2.06596048e-04, 9.39072947e-05, 1.12688754e-04, 1.69033130e-04, 1.31470213e-04, 1.50251672e-04, 5.63443768e-05, 3.00503343e-04, 1.12688754e-04, 1.31470213e-04, 1.50251672e-04, 3.75629179e-05, 9.39072947e-05, 1.31470213e-04, 1.31470213e-04, 9.39072947e-05, 1.69033130e-04, 9.39072947e-05, 1.50251672e-04, 1.87814589e-05, 9.39072947e-05, 1.12688754e-04, 1.12688754e-04, 1.12688754e-04, 1.87814589e-04, 2.25377507e-04, 1.31470213e-04, 9.39072947e-05, 1.69033130e-04, 9.39072947e-05, 9.39072947e-05, 7.51258358e-05, 3.75629179e-05, 5.63443768e-05, 2.81721884e-04, 1.50251672e-04, 2.62940425e-04, 9.76025554e-04, 3.58538397e-03, 4.91909040e-03, 1.35781052e-02, 2.25598296e-02, 1.72902602e-02, 1.42589969e-02, 1.72830549e-02, 1.79040041e-02, 1.53806898e-02, 1.38828483e-02, 1.84963926e-02, 3.03871209e-02, 3.07273184e-02, 2.86524208e-02, 2.50727921e-02, 2.40571376e-02, 2.38731278e-02, 2.29553225e-02, 1.84525770e-02, 1.63294168e-02, 1.63676749e-02, 1.13297130e-02, 1.26173964e-02, 1.13776801e-02, 1.13164993e-02, 8.16091968e-03, 9.16413644e-03, 8.63271490e-03, 7.81297702e-03, 8.40410614e-03, 7.34314861e-03, 8.26131302e-03, 6.62620814e-03, 8.17251523e-03, 7.50900478e-03, 8.37258154e-03, 8.97955613e-03, 8.71806036e-03, 8.76143718e-03, 1.24586242e-02, 1.13137464e-02, 1.17804497e-02, 1.14110048e-02, 1.14751994e-02, 1.12113719e-02, 1.31775446e-02, 1.31402239e-02, 1.39514413e-02, 1.43809759e-02, 1.72309887e-02, 1.74207044e-02, 1.83700453e-02, 1.89758261e-02, 1.70259593e-02, 1.57907801e-02, 1.36815812e-02, 1.43627441e-02, 1.19508840e-02, 1.14670756e-02, 1.08833785e-02, 7.23381194e-03, 7.93829808e-03, 1.08699335e-02, 1.42529256e-02, 1.65840550e-02, 1.83475899e-02, 1.66061411e-02, 1.70413433e-02, 1.94933672e-02, 1.29641744e-02, 6.01006686e-04, 5.63443768e-05, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]
redShadow_static=[0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.87814589e-05, 3.75629179e-05, 0.00000000e+00, 1.87814589e-05, 1.87814589e-05, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 5.63443768e-05, 3.75629179e-05, 1.87814589e-05, 5.63443768e-05, 1.87814589e-05, 5.63443768e-05, 1.87814589e-05, 1.87814589e-05, 3.75629179e-05, 5.63443768e-05, 7.51258358e-05, 1.87814589e-05, 7.51258358e-05, 1.87814589e-05, 1.87814589e-05, 9.39072947e-05, 1.12688754e-04, 9.39072947e-05, 1.31470213e-04, 1.31470213e-04, 1.87814589e-04, 9.39072947e-05, 1.87814589e-04, 1.69033130e-04, 1.50251672e-04, 3.75629179e-05, 1.31470213e-04, 2.06596048e-04, 1.50251672e-04, 7.51258358e-05, 9.39072947e-05, 2.44158966e-04, 1.50251672e-04, 2.06596048e-04, 1.12688754e-04, 1.31470213e-04, 1.31470213e-04, 1.12688754e-04, 1.31470213e-04, 3.75629179e-05, 1.87814589e-04, 2.25377507e-04, 9.39072947e-05, 7.51258358e-05, 1.87814589e-04, 1.87814589e-05, 7.51258358e-05, 1.69033130e-04, 7.51258358e-05, 2.06596048e-04, 1.87814589e-04, 1.31470213e-04, 9.39072947e-05, 7.51258358e-05, 1.87814589e-04, 5.63443768e-05, 7.51258358e-05, 1.31470213e-04, 9.39072947e-05, 1.31470213e-04, 2.62940425e-04, 1.31470213e-04, 3.75629179e-05, 9.39072947e-05, 9.39072947e-05, 1.50251672e-04, 1.69033130e-04, 5.63443768e-05, 5.63443768e-05, 5.54597713e-04, 2.97383539e-03, 1.18752172e-02, 1.22875364e-02, 1.28744968e-02, 1.46433678e-02, 1.70850949e-02, 1.42024883e-02, 1.88074467e-02, 2.02186654e-02, 2.81591412e-02, 3.88098220e-02, 3.58062673e-02, 3.00451159e-02, 2.33386346e-02, 2.23546691e-02, 1.75281951e-02, 1.65812521e-02, 1.74414140e-02, 1.70351637e-02, 1.95879234e-02, 1.96221250e-02, 1.57459052e-02, 1.07677924e-02, 1.05157278e-02, 9.17153522e-03, 8.10667246e-03, 8.74846737e-03, 8.31789681e-03, 8.98233159e-03, 7.71422323e-03, 7.15810409e-03, 6.80215169e-03, 7.91528239e-03, 8.82863051e-03, 9.85299985e-03, 8.80570176e-03, 8.59502123e-03, 1.32956674e-02, 1.23914016e-02, 1.21770769e-02, 1.18723732e-02, 1.13842918e-02, 1.19603432e-02, 1.33592847e-02, 1.36577074e-02, 1.35404663e-02, 1.58322585e-02, 1.58184389e-02, 1.73138122e-02, 1.89446628e-02, 2.05494715e-02, 1.60029149e-02, 1.52802466e-02, 1.40602912e-02, 1.39085337e-02, 1.23429161e-02, 1.22622704e-02, 1.00004958e-02, 7.19842348e-03, 7.91491816e-03, 9.96088391e-03, 1.44261141e-02, 1.72727145e-02, 1.80418031e-02, 1.54333524e-02, 1.39970852e-02, 1.80438831e-02, 1.56499230e-02, 6.76132522e-04, 5.63443768e-05, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]

blueBee_static = [0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.30412102e-05, 9.12884716e-05, 2.08659364e-04, 4.17318727e-04, 8.40631551e-04, 7.04873363e-04, 1.14122740e-03, 1.73187166e-03, 3.24981189e-03, 3.92931558e-03, 4.17589985e-03, 5.18179199e-03, 7.00291782e-03, 7.72887716e-03, 7.31242613e-03, 7.16244006e-03, 9.47133329e-03, 8.40726240e-03, 1.15111624e-02, 1.20972679e-02, 1.25682415e-02, 1.36262937e-02, 1.55989958e-02, 1.56932788e-02, 1.40049629e-02, 1.44866471e-02, 1.53281425e-02, 1.67789008e-02, 1.56271831e-02, 1.57110980e-02, 1.41196097e-02, 1.24137514e-02, 1.24042352e-02, 1.24054187e-02, 8.43620192e-03, 9.03452261e-03, 7.88297215e-03, 6.45943343e-03, 7.13815280e-03, 6.93468435e-03, 6.34740864e-03, 5.99900702e-03, 5.53165411e-03, 6.21884766e-03, 5.47252645e-03, 5.63400234e-03, 5.29341380e-03, 5.72037179e-03, 5.31476051e-03, 4.81877527e-03, 5.16711891e-03, 3.99325150e-03, 3.52618962e-03, 3.93381797e-03, 3.53681322e-03, 4.39133327e-03, 3.98752058e-03, 4.59197484e-03, 3.43312265e-03, 2.75536556e-03, 3.03294782e-03, 3.88118001e-03, 4.06248559e-03, 2.87116684e-03, 3.03736811e-03, 2.24227411e-03, 2.78478445e-03, 3.17614077e-03, 3.35569577e-03, 2.38452693e-03, 3.11300502e-03, 2.56756683e-03, 2.17515099e-03, 2.55330461e-03, 3.08203289e-03, 2.52791987e-03, 2.59828252e-03, 2.94026231e-03, 2.88553080e-03, 2.76564890e-03, 3.03737897e-03, 2.37902690e-03, 3.23185069e-03, 3.21285790e-03, 2.92295451e-03, 3.60641807e-03, 2.98409248e-03, 3.30720503e-03, 3.60839923e-03, 3.40258267e-03, 2.66950632e-03, 3.88467881e-03, 2.76638994e-03, 3.64033798e-03, 3.15736986e-03, 4.67269582e-03, 3.71177287e-03, 4.19648242e-03, 5.47497381e-03, 3.17949855e-03, 3.61382707e-03, 3.24294696e-03, 3.68324801e-03, 4.09374180e-03, 3.85240259e-03, 3.59446295e-03, 3.10243761e-03, 3.96518717e-03, 3.10681518e-03, 3.32237321e-03, 3.78529377e-03, 3.44145719e-03, 3.30999826e-03, 3.59055876e-03, 3.91985205e-03, 4.08797360e-03, 4.32890806e-03, 4.74607867e-03, 5.84170773e-03, 5.99357413e-03, 5.78031256e-03, 5.74329805e-03, 5.22254326e-03, 5.07431127e-03, 5.11578966e-03, 5.43896424e-03, 5.98907592e-03, 6.22237190e-03, 6.84355224e-03, 6.74268083e-03, 5.90530475e-03, 7.26002038e-03, 6.41885665e-03, 6.25591076e-03, 6.47897425e-03, 7.06039945e-03, 6.19866747e-03, 6.41709739e-03, 6.06698409e-03, 6.54356606e-03, 5.85730472e-03, 5.61099570e-03, 6.51709145e-03, 6.14194271e-03, 6.13661693e-03, 6.41688747e-03, 7.19124594e-03, 6.61259717e-03, 7.10824654e-03, 7.98955748e-03, 6.57007692e-03, 7.21080021e-03, 7.35531803e-03, 6.16272589e-03, 6.38350892e-03, 6.02528986e-03, 7.42329258e-03, 7.84860381e-03, 9.44211078e-03, 9.01926266e-03, 9.44940035e-03, 8.61317622e-03, 8.19915784e-03, 8.50878762e-03, 8.65233845e-03, 6.44220685e-03, 7.07225912e-03, 6.31765815e-03, 6.29379636e-03, 4.64609264e-03, 4.13475305e-03, 4.16573049e-03, 3.91091936e-03, 3.55758175e-03, 2.08441966e-03, 1.51918858e-03, 1.41767664e-03, 7.50280322e-04, 6.91222446e-04, 4.84805642e-04, 3.57992756e-04, 1.84712180e-04, 1.07652223e-04, 9.62206197e-05, 3.05922663e-05, 0.00000000e+00, 1.03208402e-04, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]
greenBee_static = [0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 1.04329682e-04, 1.69535733e-04, 4.04277517e-04, 5.60772040e-04, 1.00417319e-03, 8.21596244e-04, 6.39019301e-04, 5.34689619e-04, 3.52112676e-04, 3.48737843e-04, 1.16229836e-03, 2.12134784e-03, 2.18443790e-03, 1.74596787e-03, 2.96688329e-03, 3.96766239e-03, 4.57488004e-03, 5.09776754e-03, 7.61001414e-03, 5.14484319e-03, 7.03565361e-03, 5.44074266e-03, 5.86712781e-03, 5.71126073e-03, 4.27746887e-03, 3.99614699e-03, 3.42283385e-03, 4.04987148e-03, 4.03242413e-03, 3.80785452e-03, 4.14955288e-03, 4.54466251e-03, 4.05147209e-03, 3.85019891e-03, 4.61457310e-03, 5.57066104e-03, 6.74772294e-03, 6.85916095e-03, 7.62750046e-03, 7.67268196e-03, 8.03683313e-03, 7.84479117e-03, 8.83588997e-03, 9.81726650e-03, 8.89027488e-03, 1.03737742e-02, 9.39196114e-03, 1.01296998e-02, 9.00436406e-03, 9.52175563e-03, 8.32964788e-03, 9.95660797e-03, 1.17306875e-02, 1.05514074e-02, 9.50502011e-03, 8.85764438e-03, 9.34665896e-03, 7.16478141e-03, 7.76808690e-03, 6.76172213e-03, 7.65782219e-03, 6.96544973e-03, 7.46797546e-03, 6.27416024e-03, 6.59945865e-03, 6.63052179e-03, 6.70407534e-03, 6.37695066e-03, 5.91540365e-03, 5.88561828e-03, 5.47190135e-03, 4.28349170e-03, 4.76044334e-03, 5.54167556e-03, 5.43436002e-03, 4.90887565e-03, 4.80651530e-03, 4.31894230e-03, 4.06318270e-03, 4.94180883e-03, 3.92210702e-03, 4.37226182e-03, 4.07770438e-03, 4.48552146e-03, 4.90313122e-03, 4.79430788e-03, 4.24394869e-03, 5.04392545e-03, 4.36742715e-03, 4.93510580e-03, 5.66267750e-03, 5.52554840e-03, 4.53893754e-03, 3.67739507e-03, 3.84114944e-03, 3.95676721e-03, 4.56946824e-03, 3.38299352e-03, 3.09351599e-03, 3.71121257e-03, 3.25126902e-03, 3.76970425e-03, 3.31087739e-03, 3.67312260e-03, 3.95894992e-03, 3.57974975e-03, 4.41575234e-03, 4.77642638e-03, 3.43369886e-03, 4.23633653e-03, 3.64245873e-03, 4.28979859e-03, 4.95135456e-03, 4.38305807e-03, 4.78483339e-03, 4.82537568e-03, 4.74983593e-03, 5.36396011e-03, 6.61650574e-03, 6.53851748e-03, 6.31488281e-03, 5.52668808e-03, 4.61889098e-03, 5.39880175e-03, 5.61364603e-03, 4.54427368e-03, 3.87365049e-03, 4.44476468e-03, 4.89842093e-03, 4.12185437e-03, 4.20088943e-03, 4.28110992e-03, 4.74048533e-03, 4.86815275e-03, 5.60625441e-03, 5.06147403e-03, 4.71912550e-03, 4.76121609e-03, 4.96211272e-03, 6.10795414e-03, 6.46910718e-03, 6.64706422e-03, 6.07428387e-03, 6.55534920e-03, 6.35083912e-03, 6.67619867e-03, 7.38377048e-03, 6.55086417e-03, 7.38793529e-03, 6.99535355e-03, 8.72402875e-03, 9.11286557e-03, 9.11548686e-03, 8.69463711e-03, 8.56556639e-03, 9.59789435e-03, 1.17505345e-02, 1.19524411e-02, 1.16636883e-02, 1.14496624e-02, 9.64721751e-03, 1.09970545e-02, 1.04928279e-02, 1.05440657e-02, 9.15507546e-03, 9.29379505e-03, 6.82721637e-03, 6.96847960e-03, 4.86987487e-03, 4.39306803e-03, 4.48840304e-03, 2.96731979e-03, 3.26685955e-03, 2.64905539e-03, 2.50733467e-03, 2.30020774e-03, 1.71428920e-03, 2.31119089e-03, 2.80362842e-03, 3.63316008e-03, 2.40245321e-03, 1.01682025e-03, 6.76088300e-04, 3.32585588e-04, 3.05922663e-05, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]
redBee_static = [0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 2.60824204e-05, 7.82472613e-05, 3.52112676e-04, 5.21648409e-04, 4.95565989e-04, 4.95565989e-04, 4.56442358e-04, 3.78195097e-04, 1.95618153e-04, 5.60772040e-04, 3.52112676e-04, 5.34689619e-04, 6.15700884e-04, 1.05894932e-03, 1.29930742e-03, 2.07577996e-03, 1.93521415e-03, 1.97395203e-03, 2.38011619e-03, 4.19322514e-03, 4.01597781e-03, 4.05486028e-03, 5.86292804e-03, 5.93473436e-03, 4.60152133e-03, 5.65786538e-03, 5.54925411e-03, 6.30909475e-03, 4.22654037e-03, 3.89012748e-03, 4.00222309e-03, 4.51794352e-03, 4.06172029e-03, 4.15343527e-03, 3.98013618e-03, 4.86660670e-03, 4.30252288e-03, 4.24025215e-03, 6.44676869e-03, 6.85382940e-03, 6.40772547e-03, 7.44499629e-03, 5.89648540e-03, 7.66614560e-03, 6.93750014e-03, 6.47936273e-03, 5.86808148e-03, 6.56574734e-03, 7.03628858e-03, 8.49024615e-03, 8.57691746e-03, 8.00944004e-03, 7.59405262e-03, 7.06885955e-03, 7.72973533e-03, 6.50315976e-03, 7.80858676e-03, 8.00896723e-03, 8.57375181e-03, 9.19850690e-03, 8.23881302e-03, 7.42221358e-03, 7.30262958e-03, 6.63887594e-03, 7.15087490e-03, 6.86956464e-03, 7.17942108e-03, 7.30201918e-03, 7.22117737e-03, 7.58134339e-03, 7.05618504e-03, 5.99577472e-03, 7.55146456e-03, 7.65388732e-03, 5.63311769e-03, 6.55662243e-03, 5.84185095e-03, 6.64765933e-03, 6.85634290e-03, 6.99149072e-03, 6.66794633e-03, 4.61974432e-03, 5.28393504e-03, 5.14846259e-03, 5.76460150e-03, 4.97791390e-03, 5.09813183e-03, 4.39645471e-03, 4.49420217e-03, 4.18075638e-03, 5.19454561e-03, 4.56286317e-03, 5.67325577e-03, 5.32056054e-03, 5.73768610e-03, 6.32255472e-03, 5.16854757e-03, 4.81273296e-03, 5.04877334e-03, 5.49474804e-03, 4.64210249e-03, 4.19382349e-03, 4.53886483e-03, 4.03972135e-03, 4.00295923e-03, 4.04685943e-03, 3.83661225e-03, 4.08461152e-03, 3.08250991e-03, 4.38494491e-03, 4.07366434e-03, 3.52700482e-03, 4.54814245e-03, 4.85789705e-03, 5.04515882e-03, 5.46486301e-03, 5.24771372e-03, 5.18262566e-03, 5.93676672e-03, 8.19976376e-03, 7.89013627e-03, 6.36494351e-03, 5.50451303e-03, 5.29963379e-03, 6.59915710e-03, 5.91678996e-03, 4.48744810e-03, 4.92852990e-03, 4.61312289e-03, 5.20812182e-03, 4.32863417e-03, 5.39476849e-03, 5.21087234e-03, 5.56033371e-03, 4.78280621e-03, 5.67895275e-03, 6.39546459e-03, 6.18349231e-03, 5.43929364e-03, 6.10790878e-03, 6.05536368e-03, 7.55020493e-03, 6.44660991e-03, 6.78347766e-03, 7.01490875e-03, 7.23635121e-03, 7.12135077e-03, 7.60320221e-03, 8.52229681e-03, 9.79685636e-03, 9.06868072e-03, 1.06997417e-02, 1.04322700e-02, 9.71350302e-03, 1.03583806e-02, 1.22355026e-02, 1.36789195e-02, 1.14463035e-02, 1.20909559e-02, 1.23512323e-02, 1.13148449e-02, 1.08531249e-02, 9.11778617e-03, 9.19152353e-03, 8.00033973e-03, 7.26049012e-03, 5.80261442e-03, 5.62733343e-03, 5.64458939e-03, 4.12214335e-03, 3.95646964e-03, 3.26904675e-03, 3.29129734e-03, 3.05042752e-03, 3.59048841e-03, 3.25475090e-03, 1.71271332e-03, 5.16139186e-04, 3.54290213e-04, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00, 0.00000000e+00]
#check whether the sum is 1! to make sure that it's normalized
print(sum(blueShadow_static)+sum(greenShadow_static)+sum(redShadow_static)+sum(blueBee_static)+sum(greenBee_static)+sum(redBee_static))

blueArray=[0 for x in range(255)]
greenArray=[0 for x in range(255)]
redArray=[0 for x in range(255)]
######################################################################################################



class Utilities:


    @staticmethod
    def histo(pixelArray):
        histogram=[0 for x in range(255)]
        for i in range(pixelArray.shape[0]):
            histogram[int(pixelArray[i])]+=1
        return histogram


    @staticmethod
    def getHistogram(labelNumber, realOriginal):
        pixelArray = []
        notEmpty=False

        #get the pixels from the considered patches

        for j in range(stats[labelNumber,0],stats[labelNumber,0]+stats[labelNumber,2]):
            for i in range(stats[labelNumber,1], stats[labelNumber,1]+stats[labelNumber,3]):
                if labels[i,j]==labelNumber:
                    pixelArray.append(realOriginal[i,j])
                    notEmpty = True
        pixelArray=np.matrix(pixelArray)


        if notEmpty:
            pixelBlue = pixelArray[:, 0]
            pixelGreen = pixelArray[:, 1]
            pixelRed = pixelArray[:, 2]

            global blueArray
            global greenArray
            global redArray

            blueArray=Utilities.histo(pixelBlue)
            greenArray=Utilities.histo(pixelGreen)
            redArray=Utilities.histo(pixelRed)

            # blueArray = [x + y for x, y in zip(blueArray, Utilities.histo(pixelBlue))] #TODO: why do we add this instead of directly defining it?
            # greenArray= [x + y for x, y in zip(greenArray, Utilities.histo(pixelGreen))]
            # redArray =  [x + y for x, y in zip(redArray, Utilities.histo(pixelRed))]

            # blueArray += plt.hist(shadowBlue,range=(0,255), density=True, bins=255, stacked=True)[0] #density and stacked together make it a normalized histogram (to 1)
            # greenArray+= plt.hist(shadowGreen,range=(0,255), density=True, bins=255, stacked=True)[0]
            # redArray +=  plt.hist(shadowRed,range=(0,255), density=True, bins=255, stacked=True)[0]
            # plt.savefig('/home/philipp/Desktop/Histograms_shadows/shadwo_frame_'+str(frame)+'_label'+str(label)+'_blue')
            # plt.show()
            return (blueArray, greenArray, redArray)
        else:
            print("Arrays are empty, some error occured")

    @staticmethod
    def checkColors(labelNumber, realOriginal):

        localBlue, localGreen, localRed = Utilities.getHistogram(labelNumber, realOriginal)

        sumBee = np.dot(blueBee_static, localBlue)+np.dot(greenBee_static, localGreen)+np.dot(redBee_static, localRed)
        sumShadow = np.dot(blueShadow_static, localBlue) +np.dot(greenShadow_static, localGreen)+np.dot(redShadow_static, localRed)

        if sumBee>sumShadow:
            return True
        else:
            return False


    @staticmethod
    def connectedComponents(fgmask, original, realOriginal):
        font = cv2.FONT_HERSHEY_SIMPLEX
        connectivity = 8
        global labels
        global stats


        output = cv2.connectedComponentsWithStats(fgmask, connectivity, cv2.CV_32S)

        num_labels = output[0]
        labels = output[1]
        stats = output[2]
        # time.sleep(1)
        centroids = output[3]

        # j = 0
        for i in range(1, num_labels):  # don't do 0, cause it's just the background
            if stats[i, 4] > 2500:  # threshold to filter out small patches
                tmp=np.array(realOriginal)
                # Utilities.showCaughtPatch(tmp, labels, i)
                if Utilities.checkColors(i, realOriginal)==True:
                    #j += 1 #i is the original label, j is to not take into account the small ones. but for development i is better.
                    cv2.putText(original,str(i),(int(centroids[i,0]),int(centroids[i,1])), font, 1,(0,255,0),2,cv2.LINE_AA)###here i changed j to i in order to get the same number for the bee as in labels!!!
                    cv2.ellipse(original, (int(centroids[i, 0]), int(centroids[i, 1])), (stats[i, 2] // 3, stats[i, 3] // 3), 0, 0, 360, 255, 2)

        return labels





    @staticmethod
    def defineROI(xMin, xMax, yMin, yMax, img):
        ROI=img[yMin: yMax, xMin:xMax]
        return ROI


    @staticmethod
    def showCaughtPatch(realoriginal, labels, labelNumber):
        for i, j in np.ndindex(labels.shape):
            if labels[i,j]!= labelNumber:
                realoriginal[i,j]=(0,0,0)
        cv2.imshow('windowName', realoriginal)
        cv2.waitKey(0)
        cv2.destroyAllWindows()
